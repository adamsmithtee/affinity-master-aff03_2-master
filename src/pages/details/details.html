<!--
  Generated template for the Details page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{title}}</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>
<div class="head_div">
	<img class="full" src="{{base_url}}{{item.avatar || 'assets/images/profile.png'}}">
</div>

<ion-card>

  <ion-card-header class="background-primary color-bright">
    <div style="font-size: 21px;padding: 6px;font-family: calibri;"><ion-icon name='cart'></ion-icon> {{item.name}} </div>
  </ion-card-header>

  <ion-card-content style="margin-top: 10px;">
  		<ion-grid>
			<ion-row>
		        <ion-col col-12>
					<div class="msg">
						<ion-icon name='pin'></ion-icon>
						{{item.address}}, {{item.state}}, {{item.country}}
					</div>
				</ion-col>	
			</ion-row>		
			<ion-row>
		        <ion-col col-12>
		        	<div class="msg" (click)="mailto(item.email)">
			        	<ion-icon name='mail'></ion-icon> {{item.email}}
			        </div>
		    	</ion-col>
		    </ion-row>
		    <ion-row>	
		        <ion-col col-12 (click)="call(item.contact)">
		        	<div class="msg">
		        		<ion-icon name='call'></ion-icon> {{item.contact}}
		        	</div>			
		        </ion-col>
		      </ion-row>
		  </ion-grid>
		<button ion-button icon-left clear float-right (click)="showOnMap(item.name + ' ' + item.address + ' ' + item.state + ' ' + item.country)">
		    <ion-icon name="navigate"></ion-icon>
		    Show on Map
		</button>	
		


		
	</ion-card-content>
  
</ion-card>


<ion-card  *ngFor="let offer of offers">
	<ion-card-header class="background-primary color-bright">
	    <div style="font-size: 21px;padding: 6px;font-family: calibri;"><ion-icon name='pricetag'></ion-icon>Offer </div>
	 </ion-card-header>
	<ion-card-content>
		<div class="msg" style="padding-top:8px;">
		      <ion-icon name='information-circle'></ion-icon>
		  		
		  			{{offer.details}}<br/>
		  		
		      <ion-icon name='time'></ion-icon>
		        From {{offer.start_date}} to {{offer.end_date}}<br/>
		      
		      
		</div>
		
	  </ion-card-content>
</ion-card>
<!-- <div padding>
  	<button ion-button type="submit" class="bg-bright color-primary full" [disabled]="!item.email" (click)="sendCall(item.email)"> 
        	<ion-icon name='checkmark'></ion-icon> Claim this deal</button>
</div> -->

<div class="reviews" [hidden]="!reviews">
	<ion-row>
		<ion-col col-12>
	    	<div class="home-grid-title background-primary color-bright">REVIEWS</div>
	    </ion-col>
	</ion-row>
	<ion-row padding>
	<span float-right (click)='openAddReview(item.merchant_id)'><ion-icon name="add"></ion-icon>Add review</span>
	</ion-row>
	<ion-card *ngFor="let review of reviews">
		<ion-card-content>
		  	<div class="msg color-primary">
		  		<ion-icon name='person'></ion-icon> {{review.customer_id}}
		  		<span float-right text-right> 
		  			<ion-icon name='star'></ion-icon> 
		  			<ion-icon name='star'></ion-icon> 
		  			<ion-icon name='star-half'></ion-icon> 
		  			<ion-icon name='star-outline'></ion-icon> 
		  			<ion-icon name='star-outline'></ion-icon> 
	  			</span>
		  	</div>
		  	<div class="msg">
		  		{{review.review}}
		  	</div>
		  	<div>
		  		<span float-right style="color:#b00734"> 
		  		<ion-icon name='time'></ion-icon> {{timeSince(review.created_at)}} ago</span>
		  		
		  	</div>  	
		  </ion-card-content>
	</ion-card>
</div>
</ion-content>
