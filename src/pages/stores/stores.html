<!--
  Generated template for the Stores page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <button ion-button menuToggle icon-only>
      <ion-icon name='menu'></ion-icon>
    </button>
    <ion-grid>
      <ion-row>
        <ion-col >
          <ion-searchbar [showCancelButton]="Cancel" placeholder="Search" [(ngModel)]="searchedParameter" (ngModelChange)="getSearchedMerchant()" (ionCancel)="onCancel($event)">
          </ion-searchbar>
        </ion-col>
  <!--  <ion-col >    
          <ion-searchbar [showCancelButton]="Cancel" placeholder="Location" (ionInput)="getLocations($event)"(ionCancel)="onCancel($event)">
          </ion-searchbar>
        </ion-col> -->
      </ion-row>
    </ion-grid>      
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content>
    </ion-refresher-content>
  </ion-refresher>
  
  <ion-item>
    <ion-label>Filter by category</ion-label>
    <ion-select [(ngModel)]="category" (ngModelChange)="filterList()">
      <ion-option selected value="0">All</ion-option>
      <ion-option value="{{category.name}}" *ngFor="let category of allCategories">{{category.name}}</ion-option>
    </ion-select>
  </ion-item>
  

<ion-card *ngFor="let item of data" class="gallery">
  <div class="image" (click)="showItemDetails('Merchant', item)">
    <img  src="{{base_url}}{{item.avatar || 'images/no_image.png'}}" > 
  </div>

  <button ion-button icon-left clear float-right (click)="showOnMap(item.name +' '+ item.address + ' ' + item.state + ' ' + item.country)">
    <ion-icon name="navigate"></ion-icon>
    Show on Map
  </button>

  <ion-item>
    <!-- <ion-icon name="person" item-left large></ion-icon> -->
    <h2>{{item.name}} - {{item.category_id}}</h2>
    <p style="white-space: normal;">{{item.address}}, {{item.city}}, {{item.state}}, {{item.country}}</p>
  </ion-item>

  <ion-item>
    <!-- <ion-icon name="call" item-left large ></ion-icon> -->
    <h2 (click)="call(item.contact)" >{{item.contact}}</h2>
    <p (click)="mailto(item.email)">{{item.email}}</p>
  </ion-item>

  <ion-item>

  <!--<span float-right item-left class="color-primary"> 
    <ion-icon name='star'></ion-icon> 
    <ion-icon name='star'></ion-icon> 
    <ion-icon name='star-half'></ion-icon> 
    <ion-icon name='star-outline'></ion-icon> 
    <ion-icon name='star-outline'></ion-icon> 
  </span>
  
  <span item-right>
     <span item-left>4mins</span>
    <span item-left>{{item.distance}}Km</span> 
  </span> -->

    
  </ion-item>

</ion-card>

</ion-content>
